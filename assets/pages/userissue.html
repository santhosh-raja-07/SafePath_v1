<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <button id="set">set</button>
    <button id="get">get</button>
    <button id="moredata">moredataSet</button>
    <h1 id="name"></h1>
    <h2 id="email"></h2>
    <h3 id="age"></h3>
</head>
<body>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-app.js";
import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-analytics.js";
import { getDatabase, ref, set, get, child ,  update } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-database.js";

// Your web app's Firebase configuration
const firebaseConfig = {
  apiKey: "AIzaSyBGrcRVf1Kktffn_fYl_CtSvoCsHUK2eTg",
  authDomain: "safepath-87ebf.firebaseapp.com",
  databaseURL: "https://safepath-87ebf-default-rtdb.firebaseio.com",
  projectId: "safepath-87ebf",
  storageBucket: "safepath-87ebf.firebasestorage.app",
  messagingSenderId: "904889745500",
  appId: "1:904889745500:web:c2404615bc6e86c8bea699",
  measurementId: "G-RYFJ9DQFER"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);

// Get the database reference
const db = getDatabase();

// Set data to Firebase Realtime Database
function setData() {
  const userRef = ref(db, 'users/user1');
  const data = {
    username: "john_doe",
    email: "john@example.com",
    age: 25
  };

  set(userRef, data)
    .then(() => {
      console.log("Data has been written successfully!");
    })
    .catch((error) => {
      console.error("Error writing data: ", error);
    });
}

// Get data from Firebase Realtime Database
function getData() {
  const dbRef = ref(getDatabase());
  const userRef = child(dbRef, 'users/user1');

  get(userRef)
    .then((x) => {
      if (x.exists()) {
        console.log("Data retrieved:", x.val());
        const name = document.getElementById("name")
        const age = document.getElementById("age")
        const email = document.getElementById("email")
        name.textContent = x.val().username;
        age.textContent = x.val().age;
        email.textContent = x.val().email;
      } else {
        console.log("No data available");
      }
    })
    .catch((error) => {
      console.error("Error getting data: ", error);
    });
}

// Call the setData function to save data to Firebase
document.getElementById("set").addEventListener("click" , ()=>{
    setData();
})

// Call the getData function to retrieve data from Firebase
document.getElementById("get").addEventListener("click" , ()=>{
    getData();
})

document.getElementById("moredata").addEventListener("click" , ()=>{
    moreData();
})
function moreData() {
    const userRef = ref(db, 'users/user1');
    const data = {
      native: "USA"
    };
    update(userRef, data)
      .then(() => {
        console.log("Data has been written successfully!");
      })
      .catch((error) => {
        console.error("Error writing data: ", error);
      });
  }

</script>
</body>
</html>